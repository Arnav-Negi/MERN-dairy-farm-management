import O from"node:fs";import P from"node:path";import{fileURLToPath as Le}from"node:url";import Ye from"child_process";import ct from"path";import ut from"fs";import He from"readline";import Ve from"events";var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V={},We={get exports(){return V},set exports(s){V=s}},dt,Lt;function Ge(){if(Lt)return dt;Lt=1,dt=i,i.sync=o;var s=ut;function t(n,r){var l=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!l||(l=l.split(";"),l.indexOf("")!==-1))return!0;for(var c=0;c<l.length;c++){var a=l[c].toLowerCase();if(a&&n.substr(-a.length).toLowerCase()===a)return!0}return!1}function e(n,r,l){return!n.isSymbolicLink()&&!n.isFile()?!1:t(r,l)}function i(n,r,l){s.stat(n,function(c,a){l(c,c?!1:e(a,n,r))})}function o(n,r){return e(s.statSync(n),n,r)}return dt}var ft,Yt;function Je(){if(Yt)return ft;Yt=1,ft=t,t.sync=e;var s=ut;function t(n,r,l){s.stat(n,function(c,a){l(c,c?!1:i(a,r))})}function e(n,r){return i(s.statSync(n),r)}function i(n,r){return n.isFile()&&o(n,r)}function o(n,r){var l=n.mode,c=n.uid,a=n.gid,w=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),f=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),h=parseInt("100",8),g=parseInt("010",8),p=parseInt("001",8),E=h|g,S=l&p||l&g&&a===f||l&h&&c===w||l&E&&w===0;return S}return ft}var st;process.platform==="win32"||Be.TESTING_WINDOWS?st=Ge():st=Je();var ze=pt;pt.sync=Ue;function pt(s,t,e){if(typeof t=="function"&&(e=t,t={}),!e){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,o){pt(s,t||{},function(n,r){n?o(n):i(r)})})}st(s,t||{},function(i,o){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,o=!1),e(i,o)})}function Ue(s,t){try{return st.sync(s,t||{})}catch(e){if(t&&t.ignoreErrors||e.code==="EACCES")return!1;throw e}}const U=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Ht=ct,Ke=U?";":":",Vt=ze,Bt=s=>Object.assign(new Error(`not found: ${s}`),{code:"ENOENT"}),Wt=(s,t)=>{const e=t.colon||Ke,i=s.match(/\//)||U&&s.match(/\\/)?[""]:[...U?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(e)],o=U?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",n=U?o.split(e):[""];return U&&s.indexOf(".")!==-1&&n[0]!==""&&n.unshift(""),{pathEnv:i,pathExt:n,pathExtExe:o}},Gt=(s,t,e)=>{typeof t=="function"&&(e=t,t={}),t||(t={});const{pathEnv:i,pathExt:o,pathExtExe:n}=Wt(s,t),r=[],l=a=>new Promise((w,f)=>{if(a===i.length)return t.all&&r.length?w(r):f(Bt(s));const h=i[a],g=/^".*"$/.test(h)?h.slice(1,-1):h,p=Ht.join(g,s),E=!g&&/^\.[\\\/]/.test(s)?s.slice(0,2)+p:p;w(c(E,a,0))}),c=(a,w,f)=>new Promise((h,g)=>{if(f===o.length)return h(l(w+1));const p=o[f];Vt(a+p,{pathExt:n},(E,S)=>{if(!E&&S)if(t.all)r.push(a+p);else return h(a+p);return h(c(a,w,f+1))})});return e?l(0).then(a=>e(null,a),e):l(0)},qe=(s,t)=>{t=t||{};const{pathEnv:e,pathExt:i,pathExtExe:o}=Wt(s,t),n=[];for(let r=0;r<e.length;r++){const l=e[r],c=/^".*"$/.test(l)?l.slice(1,-1):l,a=Ht.join(c,s),w=!c&&/^\.[\\\/]/.test(s)?s.slice(0,2)+a:a;for(let f=0;f<i.length;f++){const h=w+i[f];try{if(Vt.sync(h,{pathExt:o}))if(t.all)n.push(h);else return h}catch{}}}if(t.all&&n.length)return n;if(t.nothrow)return null;throw Bt(s)};var Ze=Gt;Gt.sync=qe;var it={},Xe={get exports(){return it},set exports(s){it=s}};const Jt=(s={})=>{const t=s.env||process.env;return(s.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Xe.exports=Jt,it.default=Jt;const zt=ct,Qe=Ze,ts=it;function Ut(s,t){const e=s.options.env||process.env,i=process.cwd(),o=s.options.cwd!=null,n=o&&process.chdir!==void 0&&!process.chdir.disabled;if(n)try{process.chdir(s.options.cwd)}catch{}let r;try{r=Qe.sync(s.command,{path:e[ts({env:e})],pathExt:t?zt.delimiter:void 0})}catch{}finally{n&&process.chdir(i)}return r&&(r=zt.resolve(o?s.options.cwd:"",r)),r}function es(s){return Ut(s)||Ut(s,!0)}var ss=es,mt={};const gt=/([()\][%!^"`<>&|;, *?])/g;function is(s){return s=s.replace(gt,"^$1"),s}function rs(s,t){return s=`${s}`,s=s.replace(/(\\*)"/g,'$1$1\\"'),s=s.replace(/(\\*)$/,"$1$1"),s=`"${s}"`,s=s.replace(gt,"^$1"),t&&(s=s.replace(gt,"^$1")),s}mt.command=is,mt.argument=rs;var ns=/^#!(.*)/;const os=ns;var ls=(s="")=>{const t=s.match(os);if(!t)return null;const[e,i]=t[0].replace(/#! ?/,"").split(" "),o=e.split("/").pop();return o==="env"?i:i?`${o} ${i}`:o};const vt=ut,as=ls;function hs(s){const e=Buffer.alloc(150);let i;try{i=vt.openSync(s,"r"),vt.readSync(i,e,0,150,0),vt.closeSync(i)}catch{}return as(e.toString())}var cs=hs;const us=ct,Kt=ss,qt=mt,ds=cs,fs=process.platform==="win32",ps=/\.(?:com|exe)$/i,ms=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function gs(s){s.file=Kt(s);const t=s.file&&ds(s.file);return t?(s.args.unshift(s.file),s.command=t,Kt(s)):s.file}function vs(s){if(!fs)return s;const t=gs(s),e=!ps.test(t);if(s.options.forceShell||e){const i=ms.test(t);s.command=us.normalize(s.command),s.command=qt.command(s.command),s.args=s.args.map(n=>qt.argument(n,i));const o=[s.command].concat(s.args).join(" ");s.args=["/d","/s","/c",`"${o}"`],s.command=process.env.comspec||"cmd.exe",s.options.windowsVerbatimArguments=!0}return s}function bs(s,t,e){t&&!Array.isArray(t)&&(e=t,t=null),t=t?t.slice(0):[],e=Object.assign({},e);const i={command:s,args:t,options:e,file:void 0,original:{command:s,args:t}};return e.shell?i:vs(i)}var ws=bs;const bt=process.platform==="win32";function wt(s,t){return Object.assign(new Error(`${t} ${s.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${s.command}`,path:s.command,spawnargs:s.args})}function ys(s,t){if(!bt)return;const e=s.emit;s.emit=function(i,o){if(i==="exit"){const n=Zt(o,t);if(n)return e.call(s,"error",n)}return e.apply(s,arguments)}}function Zt(s,t){return bt&&s===1&&!t.file?wt(t.original,"spawn"):null}function $s(s,t){return bt&&s===1&&!t.file?wt(t.original,"spawnSync"):null}var xs={hookChildProcess:ys,verifyENOENT:Zt,verifyENOENTSync:$s,notFoundError:wt};const Xt=Ye,yt=ws,$t=xs;function Qt(s,t,e){const i=yt(s,t,e),o=Xt.spawn(i.command,i.args,i.options);return $t.hookChildProcess(o,i),o}function Ss(s,t,e){const i=yt(s,t,e),o=Xt.spawnSync(i.command,i.args,i.options);return o.error=o.error||$t.verifyENOENTSync(o.status,i),o}We.exports=Qt,V.spawn=Qt,V.sync=Ss,V._parse=yt,V._enoent=$t;var Es=function(s,t){t||(t={});var e={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(e.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?e.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(d){e.bools[d]=!0});var i={};Object.keys(t.alias||{}).forEach(function(d){i[d]=[].concat(t.alias[d]),i[d].forEach(function(u){i[u]=[d].concat(i[d].filter(function(y){return u!==y}))})}),[].concat(t.string).filter(Boolean).forEach(function(d){e.strings[d]=!0,i[d]&&(e.strings[i[d]]=!0)});var o=t.default||{},n={_:[]};Object.keys(e.bools).forEach(function(d){c(d,o[d]===void 0?!1:o[d])});var r=[];s.indexOf("--")!==-1&&(r=s.slice(s.indexOf("--")+1),s=s.slice(0,s.indexOf("--")));function l(d,u){return e.allBools&&/^--[^=]+$/.test(u)||e.strings[d]||e.bools[d]||i[d]}function c(d,u,y){if(!(y&&e.unknownFn&&!l(d,y)&&e.unknownFn(y)===!1)){var m=!e.strings[d]&&te(u)?Number(u):u;a(n,d.split("."),m),(i[d]||[]).forEach(function(H){a(n,H.split("."),m)})}}function a(d,u,y){for(var m=d,H=0;H<u.length-1;H++){var x=u[H];if(ee(m,x))return;m[x]===void 0&&(m[x]={}),(m[x]===Object.prototype||m[x]===Number.prototype||m[x]===String.prototype)&&(m[x]={}),m[x]===Array.prototype&&(m[x]=[]),m=m[x]}var x=u[u.length-1];ee(m,x)||((m===Object.prototype||m===Number.prototype||m===String.prototype)&&(m={}),m===Array.prototype&&(m=[]),m[x]===void 0||e.bools[x]||typeof m[x]=="boolean"?m[x]=y:Array.isArray(m[x])?m[x].push(y):m[x]=[m[x],y])}function w(d){return i[d].some(function(u){return e.bools[u]})}for(var f=0;f<s.length;f++){var h=s[f];if(/^--.+=/.test(h)){var g=h.match(/^--([^=]+)=([\s\S]*)$/),p=g[1],E=g[2];e.bools[p]&&(E=E!=="false"),c(p,E,h)}else if(/^--no-.+/.test(h)){var p=h.match(/^--no-(.+)/)[1];c(p,!1,h)}else if(/^--.+/.test(h)){var p=h.match(/^--(.+)/)[1],S=s[f+1];S!==void 0&&!/^-/.test(S)&&!e.bools[p]&&!e.allBools&&(!i[p]||!w(p))?(c(p,S,h),f++):/^(true|false)$/.test(S)?(c(p,S==="true",h),f++):c(p,e.strings[p]?"":!0,h)}else if(/^-[^-]+/.test(h)){for(var C=h.slice(1,-1).split(""),z=!1,T=0;T<C.length;T++){var S=h.slice(T+2);if(S==="-"){c(C[T],S,h);continue}if(/[A-Za-z]/.test(C[T])&&/=/.test(S)){c(C[T],S.split("=")[1],h),z=!0;break}if(/[A-Za-z]/.test(C[T])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(S)){c(C[T],S,h),z=!0;break}if(C[T+1]&&C[T+1].match(/\W/)){c(C[T],h.slice(T+2),h),z=!0;break}else c(C[T],e.strings[C[T]]?"":!0,h)}var p=h.slice(-1)[0];!z&&p!=="-"&&(s[f+1]&&!/^(-|--)[^-]/.test(s[f+1])&&!e.bools[p]&&(!i[p]||!w(p))?(c(p,s[f+1],h),f++):s[f+1]&&/^(true|false)$/.test(s[f+1])?(c(p,s[f+1]==="true",h),f++):c(p,e.strings[p]?"":!0,h))}else if((!e.unknownFn||e.unknownFn(h)!==!1)&&n._.push(e.strings._||!te(h)?h:Number(h)),t.stopEarly){n._.push.apply(n._,s.slice(f+1));break}}return Object.keys(o).forEach(function(d){Ts(n,d.split("."))||(a(n,d.split("."),o[d]),(i[d]||[]).forEach(function(u){a(n,u.split("."),o[d])}))}),t["--"]?(n["--"]=new Array,r.forEach(function(d){n["--"].push(d)})):r.forEach(function(d){n._.push(d)}),n};function Ts(s,t){var e=s;t.slice(0,-1).forEach(function(o){e=e[o]||{}});var i=t[t.length-1];return i in e}function te(s){return typeof s=="number"||/^0x[0-9a-f]+$/i.test(s)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(s)}function ee(s,t){return t==="constructor"&&typeof s[t]=="function"||t==="__proto__"}var se={};const{FORCE_COLOR:Os,NODE_DISABLE_COLORS:Cs,TERM:Ps}=process.env,v={enabled:!Cs&&Ps!=="dumb"&&Os!=="0",reset:b(0,0),bold:b(1,22),dim:b(2,22),italic:b(3,23),underline:b(4,24),inverse:b(7,27),hidden:b(8,28),strikethrough:b(9,29),black:b(30,39),red:b(31,39),green:b(32,39),yellow:b(33,39),blue:b(34,39),magenta:b(35,39),cyan:b(36,39),white:b(37,39),gray:b(90,39),grey:b(90,39),bgBlack:b(40,49),bgRed:b(41,49),bgGreen:b(42,49),bgYellow:b(43,49),bgBlue:b(44,49),bgMagenta:b(45,49),bgCyan:b(46,49),bgWhite:b(47,49)};function ie(s,t){let e=0,i,o="",n="";for(;e<s.length;e++)i=s[e],o+=i.open,n+=i.close,t.includes(i.close)&&(t=t.replace(i.rgx,i.close+i.open));return o+t+n}function Ms(s,t){let e={has:s,keys:t};return e.reset=v.reset.bind(e),e.bold=v.bold.bind(e),e.dim=v.dim.bind(e),e.italic=v.italic.bind(e),e.underline=v.underline.bind(e),e.inverse=v.inverse.bind(e),e.hidden=v.hidden.bind(e),e.strikethrough=v.strikethrough.bind(e),e.black=v.black.bind(e),e.red=v.red.bind(e),e.green=v.green.bind(e),e.yellow=v.yellow.bind(e),e.blue=v.blue.bind(e),e.magenta=v.magenta.bind(e),e.cyan=v.cyan.bind(e),e.white=v.white.bind(e),e.gray=v.gray.bind(e),e.grey=v.grey.bind(e),e.bgBlack=v.bgBlack.bind(e),e.bgRed=v.bgRed.bind(e),e.bgGreen=v.bgGreen.bind(e),e.bgYellow=v.bgYellow.bind(e),e.bgBlue=v.bgBlue.bind(e),e.bgMagenta=v.bgMagenta.bind(e),e.bgCyan=v.bgCyan.bind(e),e.bgWhite=v.bgWhite.bind(e),e}function b(s,t){let e={open:`\x1B[${s}m`,close:`\x1B[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(s)||(this.has.push(s),this.keys.push(e)),i===void 0?this:v.enabled?ie(this.keys,i+""):i+""):i===void 0?Ms([s],[e]):v.enabled?ie([e],i+""):i+""}}var M=v,Ds=(s,t)=>{if(!(s.meta&&s.name!=="escape")){if(s.ctrl){if(s.name==="a")return"first";if(s.name==="c"||s.name==="d")return"abort";if(s.name==="e")return"last";if(s.name==="g")return"reset"}if(t){if(s.name==="j")return"down";if(s.name==="k")return"up"}return s.name==="return"||s.name==="enter"?"submit":s.name==="backspace"?"delete":s.name==="delete"?"deleteForward":s.name==="abort"?"abort":s.name==="escape"?"exit":s.name==="tab"?"next":s.name==="pagedown"?"nextPage":s.name==="pageup"?"prevPage":s.name==="home"?"home":s.name==="end"?"end":s.name==="up"?"up":s.name==="down"?"down":s.name==="right"?"right":s.name==="left"?"left":!1}},xt=s=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),e=new RegExp(t,"g");return typeof s=="string"?s.replace(e,""):s};const St="\x1B",$=`${St}[`,_s="\x07",Et={to(s,t){return t?`${$}${t+1};${s+1}H`:`${$}${s+1}G`},move(s,t){let e="";return s<0?e+=`${$}${-s}D`:s>0&&(e+=`${$}${s}C`),t<0?e+=`${$}${-t}A`:t>0&&(e+=`${$}${t}B`),e},up:(s=1)=>`${$}${s}A`,down:(s=1)=>`${$}${s}B`,forward:(s=1)=>`${$}${s}C`,backward:(s=1)=>`${$}${s}D`,nextLine:(s=1)=>`${$}E`.repeat(s),prevLine:(s=1)=>`${$}F`.repeat(s),left:`${$}G`,hide:`${$}?25l`,show:`${$}?25h`,save:`${St}7`,restore:`${St}8`},Is={up:(s=1)=>`${$}S`.repeat(s),down:(s=1)=>`${$}T`.repeat(s)},Rs={screen:`${$}2J`,up:(s=1)=>`${$}1J`.repeat(s),down:(s=1)=>`${$}J`.repeat(s),line:`${$}2K`,lineEnd:`${$}K`,lineStart:`${$}1K`,lines(s){let t="";for(let e=0;e<s;e++)t+=this.line+(e<s-1?Et.up():"");return s&&(t+=Et.left),t}};var D={cursor:Et,scroll:Is,erase:Rs,beep:_s};const As=xt,{erase:re,cursor:ks}=D,js=s=>[...As(s)].length;var Ns=function(s,t){if(!t)return re.line+ks.to(0);let e=0;const i=s.split(/\r?\n/);for(let o of i)e+=1+Math.floor(Math.max(js(o)-1,0)/t);return re.lines(e)};const X={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Fs={arrowUp:X.arrowUp,arrowDown:X.arrowDown,arrowLeft:X.arrowLeft,arrowRight:X.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},Ls=process.platform==="win32"?Fs:X;var ne=Ls;const K=M,B=ne,Tt=Object.freeze({password:{scale:1,render:s=>"*".repeat(s.length)},emoji:{scale:2,render:s=>"\u{1F603}".repeat(s.length)},invisible:{scale:0,render:s=>""},default:{scale:1,render:s=>`${s}`}}),Ys=s=>Tt[s]||Tt.default,Q=Object.freeze({aborted:K.red(B.cross),done:K.green(B.tick),exited:K.yellow(B.cross),default:K.cyan("?")}),Hs=(s,t,e)=>t?Q.aborted:e?Q.exited:s?Q.done:Q.default,Vs=s=>K.gray(s?B.ellipsis:B.pointerSmall),Bs=(s,t)=>K.gray(s?t?B.pointerSmall:"+":B.line);var Ws={styles:Tt,render:Ys,symbols:Q,symbol:Hs,delimiter:Vs,item:Bs};const Gs=xt;var Js=function(s,t){let e=String(Gs(s)||"").split(/\r?\n/);return t?e.map(i=>Math.ceil(i.length/t)).reduce((i,o)=>i+o):e.length},zs=(s,t={})=>{const e=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",i=t.width;return(s||"").split(/\r?\n/g).map(o=>o.split(/\s+/g).reduce((n,r)=>(r.length+e.length>=i||n[n.length-1].length+r.length+1<i?n[n.length-1]+=` ${r}`:n.push(`${e}${r}`),n),[e]).join(`
`)).join(`
`)},Us=(s,t,e)=>{e=e||t;let i=Math.min(t-e,s-Math.floor(e/2));i<0&&(i=0);let o=Math.min(i+e,t);return{startIndex:i,endIndex:o}},_={action:Ds,clear:Ns,style:Ws,strip:xt,figures:ne,lines:Js,wrap:zs,entriesToDisplay:Us};const oe=He,{action:Ks}=_,qs=Ve,{beep:Zs,cursor:Xs}=D,Qs=M;let ti=class extends qs{constructor(t={}){super(),this.firstRender=!0,this.in=t.stdin||process.stdin,this.out=t.stdout||process.stdout,this.onRender=(t.onRender||(()=>{})).bind(this);const e=oe.createInterface({input:this.in,escapeCodeTimeout:50});oe.emitKeypressEvents(this.in,e),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,o=(n,r)=>{let l=Ks(r,i);l===!1?this._&&this._(n,r):typeof this[l]=="function"?this[l](r):this.bell()};this.close=()=>{this.out.write(Xs.show),this.in.removeListener("keypress",o),this.in.isTTY&&this.in.setRawMode(!1),e.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",o)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(Zs)}render(){this.onRender(Qs),this.firstRender&&(this.firstRender=!1)}};var N=ti;const rt=M,ei=N,{erase:si,cursor:tt}=D,{style:Ot,clear:Ct,lines:ii,figures:ri}=_;class ni extends ei{constructor(t={}){super(t),this.transform=Ot.render(t.style),this.scale=this.transform.scale,this.msg=t.message,this.initial=t.initial||"",this.validator=t.validate||(()=>!0),this.value="",this.errorMsg=t.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=Ct("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=rt.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(t){this.placeholder||(this.cursor=this.cursor+t,this.cursorOffset+=t)}_(t,e){let i=this.value.slice(0,this.cursor),o=this.value.slice(this.cursor);this.value=`${i}${t}${o}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let t=this.value.slice(0,this.cursor-1),e=this.value.slice(this.cursor);this.value=`${t}${e}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let t=this.value.slice(0,this.cursor),e=this.value.slice(this.cursor+1);this.value=`${t}${e}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(tt.down(ii(this.outputError,this.out.columns)-1)+Ct(this.outputError,this.out.columns)),this.out.write(Ct(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Ot.symbol(this.done,this.aborted),rt.bold(this.msg),Ot.delimiter(this.done),this.red?rt.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":ri.pointerSmall} ${rt.red().italic(e)}`,"")),this.out.write(si.line+tt.to(0)+this.outputText+tt.save+this.outputError+tt.restore+tt.move(this.cursorOffset,0)))}}var oi=ni;const R=M,li=N,{style:le,clear:ae,figures:nt,wrap:ai,entriesToDisplay:hi}=_,{cursor:ci}=D;class ui extends li{constructor(t={}){super(t),this.msg=t.message,this.hint=t.hint||"- Use arrow-keys. Return to submit.",this.warn=t.warn||"- This option is disabled",this.cursor=t.initial||0,this.choices=t.choices.map((e,i)=>(typeof e=="string"&&(e={title:e,value:i}),{title:e&&(e.title||e.value||e),value:e&&(e.value===void 0?i:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled})),this.optionsPerPage=t.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=ae("",this.out.columns),this.render()}moveCursor(t){this.cursor=t,this.value=this.choices[t].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(t,e){if(t===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(ci.hide):this.out.write(ae(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=hi(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[le.symbol(this.done,this.aborted),R.bold(this.msg),le.delimiter(!1),this.done?this.selection.title:this.selection.disabled?R.yellow(this.warn):R.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let i=t;i<e;i++){let o,n,r="",l=this.choices[i];i===t&&t>0?n=nt.arrowUp:i===e-1&&e<this.choices.length?n=nt.arrowDown:n=" ",l.disabled?(o=this.cursor===i?R.gray().underline(l.title):R.strikethrough().gray(l.title),n=(this.cursor===i?R.bold().gray(nt.pointer)+" ":"  ")+n):(o=this.cursor===i?R.cyan().underline(l.title):l.title,n=(this.cursor===i?R.cyan(nt.pointer)+" ":"  ")+n,l.description&&this.cursor===i&&(r=` - ${l.description}`,(n.length+o.length+r.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(r=`
`+ai(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${o}${R.gray(r)}
`}}this.out.write(this.outputText)}}var di=ui;const ot=M,fi=N,{style:he,clear:pi}=_,{cursor:ce,erase:mi}=D;class gi extends fi{constructor(t={}){super(t),this.msg=t.message,this.value=!!t.initial,this.active=t.active||"on",this.inactive=t.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(t,e){if(t===" ")this.value=!this.value;else if(t==="1")this.value=!0;else if(t==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(ce.hide):this.out.write(pi(this.outputText,this.out.columns)),super.render(),this.outputText=[he.symbol(this.done,this.aborted),ot.bold(this.msg),he.delimiter(this.done),this.value?this.inactive:ot.cyan().underline(this.inactive),ot.gray("/"),this.value?ot.cyan().underline(this.active):this.active].join(" "),this.out.write(mi.line+ce.to(0)+this.outputText))}}var vi=gi;let Pt=class{constructor({token:t,date:e,parts:i,locales:o}){this.token=t,this.date=e||new Date,this.parts=i||[this],this.locales=o||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find((e,i)=>i>t&&e instanceof Pt)}setTo(t){}prev(){let t=[].concat(this.parts).reverse();const e=t.indexOf(this);return t.find((i,o)=>o>e&&i instanceof Pt)}toString(){return String(this.date)}};var A=Pt;const bi=A;let wi=class extends bi{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}};var yi=wi;const $i=A,xi=s=>(s=s%10,s===1?"st":s===2?"nd":s===3?"rd":"th");let Si=class extends $i{constructor(t={}){super(t)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(t){this.date.setDate(parseInt(t.substr(-2)))}toString(){let t=this.date.getDate(),e=this.date.getDay();return this.token==="DD"?String(t).padStart(2,"0"):this.token==="Do"?t+xi(t):this.token==="d"?e+1:this.token==="ddd"?this.locales.weekdaysShort[e]:this.token==="dddd"?this.locales.weekdays[e]:t}};var Ei=Si;const Ti=A;let Oi=class extends Ti{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}};var Ci=Oi;const Pi=A;let Mi=class extends Pi{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};var Di=Mi;const _i=A;let Ii=class extends _i{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}};var Ri=Ii;const Ai=A;let ki=class extends Ai{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),e=this.token.length;return e===2?String(t+1).padStart(2,"0"):e===3?this.locales.monthsShort[t]:e===4?this.locales.months[t]:String(t+1)}};var ji=ki;const Ni=A;let Fi=class extends Ni{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}};var Li=Fi;const Yi=A;let Hi=class extends Yi{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}};var Vi=Hi,Bi={DatePart:A,Meridiem:yi,Day:Ei,Hours:Ci,Milliseconds:Di,Minutes:Ri,Month:ji,Seconds:Li,Year:Vi};const Mt=M,Wi=N,{style:ue,clear:de,figures:Gi}=_,{erase:Ji,cursor:fe}=D,{DatePart:pe,Meridiem:zi,Day:Ui,Hours:Ki,Milliseconds:qi,Minutes:Zi,Month:Xi,Seconds:Qi,Year:tr}=Bi,er=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,me={1:({token:s})=>s.replace(/\\(.)/g,"$1"),2:s=>new Ui(s),3:s=>new Xi(s),4:s=>new tr(s),5:s=>new zi(s),6:s=>new Ki(s),7:s=>new Zi(s),8:s=>new Qi(s),9:s=>new qi(s)},sr={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class ir extends Wi{constructor(t={}){super(t),this.msg=t.message,this.cursor=0,this.typed="",this.locales=Object.assign(sr,t.locales),this._date=t.initial||new Date,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.mask=t.mask||"YYYY-MM-DD HH:mm:ss",this.clear=de("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(t){t&&this._date.setTime(t.getTime())}set mask(t){let e;for(this.parts=[];e=er.exec(t);){let o=e.shift(),n=e.findIndex(r=>r!=null);this.parts.push(n in me?me[n]({token:e[n]||o,date:this.date,parts:this.parts,locales:this.locales}):e[n]||o)}let i=this.parts.reduce((o,n)=>(typeof n=="string"&&typeof o[o.length-1]=="string"?o[o.length-1]+=n:o.push(n),o),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(t){this.typed="",this.cursor=t,this.fire()}reset(){this.moveCursor(this.parts.findIndex(t=>t instanceof pe)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let t=this.parts[this.cursor].prev();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}right(){let t=this.parts[this.cursor].next();if(t==null)return this.bell();this.moveCursor(this.parts.indexOf(t)),this.render()}next(){let t=this.parts[this.cursor].next();this.moveCursor(t?this.parts.indexOf(t):this.parts.findIndex(e=>e instanceof pe)),this.render()}_(t){/\d/.test(t)&&(this.typed+=t,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(fe.hide):this.out.write(de(this.outputText,this.out.columns)),super.render(),this.outputText=[ue.symbol(this.done,this.aborted),Mt.bold(this.msg),ue.delimiter(!1),this.parts.reduce((t,e,i)=>t.concat(i===this.cursor&&!this.done?Mt.cyan().underline(e.toString()):e),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":Gi.pointerSmall} ${Mt.red().italic(e)}`,"")),this.out.write(Ji.line+fe.to(0)+this.outputText))}}var rr=ir;const lt=M,nr=N,{cursor:at,erase:or}=D,{style:Dt,figures:lr,clear:ge,lines:ar}=_,hr=/[0-9]/,_t=s=>s!==void 0,ve=(s,t)=>{let e=Math.pow(10,t);return Math.round(s*e)/e};class cr extends nr{constructor(t={}){super(t),this.transform=Dt.render(t.style),this.msg=t.message,this.initial=_t(t.initial)?t.initial:"",this.float=!!t.float,this.round=t.round||2,this.inc=t.increment||1,this.min=_t(t.min)?t.min:-1/0,this.max=_t(t.max)?t.max:1/0,this.errorMsg=t.error||"Please Enter A Valid Value",this.validator=t.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){!t&&t!==0?(this.placeholder=!0,this.rendered=lt.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${ve(t,this.round)}`),this._value=ve(t,this.round)),this.fire()}get value(){return this._value}parse(t){return this.float?parseFloat(t):parseInt(t)}valid(t){return t==="-"||t==="."&&this.float||hr.test(t)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let t=this.value;this.value=t!==""?t:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let t=await this.validator(this.value);typeof t=="string"&&(this.errorMsg=t,t=!1),this.error=!t}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let t=this.value;this.value=t!==""?t:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let t=this.value.toString();if(t.length===0)return this.bell();this.value=this.parse(t=t.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(t,e){if(!this.valid(t))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=t,this.lastHit=i,this.color="cyan",t===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(at.down(ar(this.outputError,this.out.columns)-1)+ge(this.outputError,this.out.columns)),this.out.write(ge(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Dt.symbol(this.done,this.aborted),lt.bold(this.msg),Dt.delimiter(this.done),!this.done||!this.done&&!this.placeholder?lt[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((t,e,i)=>t+`
${i?" ":lr.pointerSmall} ${lt.red().italic(e)}`,"")),this.out.write(or.line+at.to(0)+this.outputText+at.save+this.outputError+at.restore))}}var ur=cr;const I=M,{cursor:dr}=D,fr=N,{clear:be,figures:F,style:we,wrap:pr,entriesToDisplay:mr}=_;let gr=class extends fr{constructor(t={}){super(t),this.msg=t.message,this.cursor=t.cursor||0,this.scrollIndex=t.cursor||0,this.hint=t.hint||"",this.warn=t.warn||"- This option is disabled -",this.minSelected=t.min,this.showMinError=!1,this.maxChoices=t.max,this.instructions=t.instructions,this.optionsPerPage=t.optionsPerPage||10,this.value=t.choices.map((e,i)=>(typeof e=="string"&&(e={title:e,value:i}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(e.value===void 0?i:e.value),selected:e&&e.selected,disabled:e&&e.disabled})),this.clear=be("",this.out.columns),t.overrideRender||this.render()}reset(){this.value.map(t=>!t.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(t=>t.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const t=this.value.filter(e=>e.selected);this.minSelected&&t.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const t=this.value[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const t=!this.value[this.cursor].selected;this.value.filter(e=>!e.disabled).forEach(e=>e.selected=t),this.render()}_(t,e){if(t===" ")this.handleSpaceToggle();else if(t==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${F.arrowUp}/${F.arrowDown}: Highlight option
    ${F.arrowLeft}/${F.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(t,e,i,o){const n=(e.selected?I.green(F.radioOn):F.radioOff)+" "+o+" ";let r,l;return e.disabled?r=t===i?I.gray().underline(e.title):I.strikethrough().gray(e.title):(r=t===i?I.cyan().underline(e.title):e.title,t===i&&e.description&&(l=` - ${e.description}`,(n.length+r.length+l.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(l=`
`+pr(e.description,{margin:n.length,width:this.out.columns})))),n+r+I.gray(l||"")}paginateOptions(t){if(t.length===0)return I.red("No matches for this query.");let{startIndex:e,endIndex:i}=mr(this.cursor,t.length,this.optionsPerPage),o,n=[];for(let r=e;r<i;r++)r===e&&e>0?o=F.arrowUp:r===i-1&&i<t.length?o=F.arrowDown:o=" ",n.push(this.renderOption(this.cursor,t[r],r,o));return`
`+n.join(`
`)}renderOptions(t){return this.done?"":this.paginateOptions(t)}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[I.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(I.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(dr.hide),super.render();let t=[we.symbol(this.done,this.aborted),I.bold(this.msg),we.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=I.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.value),this.out.write(this.clear+t),this.clear=be(t,this.out.columns)}};var ye=gr;const et=M,vr=N,{erase:br,cursor:$e}=D,{style:It,clear:xe,figures:Rt,wrap:wr,entriesToDisplay:yr}=_,Se=(s,t)=>s[t]&&(s[t].value||s[t].title||s[t]),$r=(s,t)=>s[t]&&(s[t].title||s[t].value||s[t]),xr=(s,t)=>{const e=s.findIndex(i=>i.value===t||i.title===t);return e>-1?e:void 0};class Sr extends vr{constructor(t={}){super(t),this.msg=t.message,this.suggest=t.suggest,this.choices=t.choices,this.initial=typeof t.initial=="number"?t.initial:xr(t.choices,t.initial),this.select=this.initial||t.cursor||0,this.i18n={noMatches:t.noMatches||"no matches found"},this.fallback=t.fallback||this.initial,this.clearFirst=t.clearFirst||!1,this.suggestions=[],this.input="",this.limit=t.limit||10,this.cursor=0,this.transform=It.render(t.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=xe("",this.out.columns),this.complete(this.render),this.render()}set fallback(t){this._fb=Number.isSafeInteger(parseInt(t))?parseInt(t):t}get fallback(){let t;return typeof this._fb=="number"?t=this.choices[this._fb]:typeof this._fb=="string"&&(t={title:this._fb}),t||this._fb||{title:this.i18n.noMatches}}moveSelect(t){this.select=t,this.suggestions.length>0?this.value=Se(this.suggestions,t):this.value=this.fallback.value,this.fire()}async complete(t){const e=this.completing=this.suggest(this.input,this.choices),i=await e;if(this.completing!==e)return;this.suggestions=i.map((n,r,l)=>({title:$r(l,r),value:Se(l,r),description:n.description})),this.completing=!1;const o=Math.max(i.length-1,0);this.moveSelect(Math.min(o,this.select)),t&&t()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){let i=this.input.slice(0,this.cursor),o=this.input.slice(this.cursor);this.input=`${i}${t}${o}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let t=this.input.slice(0,this.cursor-1),e=this.input.slice(this.cursor);this.input=`${t}${e}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let t=this.input.slice(0,this.cursor),e=this.input.slice(this.cursor+1);this.input=`${t}${e}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,e,i,o){let n,r=i?Rt.arrowUp:o?Rt.arrowDown:" ",l=e?et.cyan().underline(t.title):t.title;return r=(e?et.cyan(Rt.pointer)+" ":"  ")+r,t.description&&(n=` - ${t.description}`,(r.length+l.length+n.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(n=`
`+wr(t.description,{margin:3,width:this.out.columns}))),r+" "+l+et.gray(n||"")}render(){if(this.closed)return;this.firstRender?this.out.write($e.hide):this.out.write(xe(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:e}=yr(this.select,this.choices.length,this.limit);if(this.outputText=[It.symbol(this.done,this.aborted,this.exited),et.bold(this.msg),It.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const i=this.suggestions.slice(t,e).map((o,n)=>this.renderOption(o,this.select===n+t,n===0&&t>0,n+t===e-1&&e<this.choices.length)).join(`
`);this.outputText+=`
`+(i||et.gray(this.fallback.title))}this.out.write(br.line+$e.to(0)+this.outputText)}}var Er=Sr;const k=M,{cursor:Tr}=D,Or=ye,{clear:Ee,style:Te,figures:q}=_;class Cr extends Or{constructor(t={}){t.overrideRender=!0,super(t),this.inputValue="",this.clear=Ee("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(t=>t.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const t=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const e=this.filteredOptions.findIndex(i=>i===t);this.cursor=e<0?0:e,this.render()}handleSpaceToggle(){const t=this.filteredOptions[this.cursor];if(t.selected)t.selected=!1,this.render();else{if(t.disabled||this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();t.selected=!0,this.render()}}handleInputChange(t){this.inputValue=this.inputValue+t,this.updateFilteredOptions()}_(t,e){t===" "?this.handleSpaceToggle():this.handleInputChange(t)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${q.arrowUp}/${q.arrowDown}: Highlight option
    ${q.arrowLeft}/${q.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:k.gray("Enter something to filter")}
`}renderOption(t,e,i){let o;return e.disabled?o=t===i?k.gray().underline(e.title):k.strikethrough().gray(e.title):o=t===i?k.cyan().underline(e.title):e.title,(e.selected?k.green(q.radioOn):q.radioOff)+"  "+o}renderDoneOrInstructions(){if(this.done)return this.value.filter(e=>e.selected).map(e=>e.title).join(", ");const t=[k.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(k.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Tr.hide),super.render();let t=[Te.symbol(this.done,this.aborted),k.bold(this.msg),Te.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(t+=k.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),t+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+t),this.clear=Ee(t,this.out.columns)}}var Pr=Cr;const Oe=M,Mr=N,{style:Ce,clear:Dr}=_,{erase:_r,cursor:Pe}=D;class Ir extends Mr{constructor(t={}){super(t),this.msg=t.message,this.value=t.initial,this.initialValue=!!t.initial,this.yesMsg=t.yes||"yes",this.yesOption=t.yesOption||"(Y/n)",this.noMsg=t.no||"no",this.noOption=t.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(t,e){return t.toLowerCase()==="y"?(this.value=!0,this.submit()):t.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(Pe.hide):this.out.write(Dr(this.outputText,this.out.columns)),super.render(),this.outputText=[Ce.symbol(this.done,this.aborted),Oe.bold(this.msg),Ce.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Oe.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(_r.line+Pe.to(0)+this.outputText))}}var Rr=Ir,Ar={TextPrompt:oi,SelectPrompt:di,TogglePrompt:vi,DatePrompt:rr,NumberPrompt:ur,MultiselectPrompt:ye,AutocompletePrompt:Er,AutocompleteMultiselectPrompt:Pr,ConfirmPrompt:Rr};(function(s){const t=s,e=Ar,i=r=>r;function o(r,l,c={}){return new Promise((a,w)=>{const f=new e[r](l),h=c.onAbort||i,g=c.onSubmit||i,p=c.onExit||i;f.on("state",l.onState||i),f.on("submit",E=>a(g(E))),f.on("exit",E=>a(p(E))),f.on("abort",E=>w(h(E)))})}t.text=r=>o("TextPrompt",r),t.password=r=>(r.style="password",t.text(r)),t.invisible=r=>(r.style="invisible",t.text(r)),t.number=r=>o("NumberPrompt",r),t.date=r=>o("DatePrompt",r),t.confirm=r=>o("ConfirmPrompt",r),t.list=r=>{const l=r.separator||",";return o("TextPrompt",r,{onSubmit:c=>c.split(l).map(a=>a.trim())})},t.toggle=r=>o("TogglePrompt",r),t.select=r=>o("SelectPrompt",r),t.multiselect=r=>{r.choices=[].concat(r.choices||[]);const l=c=>c.filter(a=>a.selected).map(a=>a.value);return o("MultiselectPrompt",r,{onAbort:l,onSubmit:l})},t.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const l=c=>c.filter(a=>a.selected).map(a=>a.value);return o("AutocompleteMultiselectPrompt",r,{onAbort:l,onSubmit:l})};const n=(r,l)=>Promise.resolve(l.filter(c=>c.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));t.autocomplete=r=>(r.suggest=r.suggest||n,r.choices=[].concat(r.choices||[]),o("AutocompletePrompt",r))})(se);const At=se,kr=["suggest","format","onState","validate","onRender","type"],Me=()=>{};async function L(s=[],{onSubmit:t=Me,onCancel:e=Me}={}){const i={},o=L._override||{};s=[].concat(s);let n,r,l,c,a,w;const f=async(h,g,p=!1)=>{if(!(!p&&h.validate&&h.validate(g)!==!0))return h.format?await h.format(g,i):g};for(r of s)if({name:c,type:a}=r,typeof a=="function"&&(a=await a(n,{...i},r),r.type=a),!!a){for(let h in r){if(kr.includes(h))continue;let g=r[h];r[h]=typeof g=="function"?await g(n,{...i},w):g}if(w=r,typeof r.message!="string")throw new Error("prompt message is required");if({name:c,type:a}=r,At[a]===void 0)throw new Error(`prompt type (${a}) is not defined`);if(o[r.name]!==void 0&&(n=await f(r,o[r.name]),n!==void 0)){i[c]=n;continue}try{n=L._injected?jr(L._injected,r.initial):await At[a](r),i[c]=n=await f(r,n,!0),l=await t(r,n,i)}catch{l=!await e(r,i)}if(l)return i}return i}function jr(s,t){const e=s.shift();if(e instanceof Error)throw e;return e===void 0?t:e}function Nr(s){L._injected=(L._injected||[]).concat(s)}function Fr(s){L._override=Object.assign({},s)}var Lr=Object.assign(L,{prompt:L,prompts:At,inject:Nr,override:Fr});let W=!0;const Z=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let De=0;if(Z.process&&Z.process.env&&Z.process.stdout){const{FORCE_COLOR:s,NODE_DISABLE_COLORS:t,TERM:e}=Z.process.env;t||s==="0"?W=!1:s==="1"?W=!0:e==="dumb"?W=!1:"CI"in Z.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(i=>i in Z.process.env)?W=!0:W=process.stdout.isTTY,W&&(De=e&&e.endsWith("-256color")?2:1)}let _e={enabled:W,supportLevel:De};function j(s,t,e=1){const i=`\x1B[${s}m`,o=`\x1B[${t}m`,n=new RegExp(`\\x1b\\[${t}m`,"g");return r=>_e.enabled&&_e.supportLevel>=e?i+(""+r).replace(n,i)+o:""+r}const G=j(0,0),ht=j(31,39),Ie=j(32,39),Y=j(33,39),J=j(34,39),Yr=j(35,39),Hr=j(36,39),Vr=j(91,39),Br=j(92,39),kt=Es(process.argv.slice(2),{string:["_"]}),jt=process.cwd(),Nt=[{name:"vanilla",display:"Vanilla",color:Y,variants:[{name:"vanilla",display:"JavaScript",color:Y},{name:"vanilla-ts",display:"TypeScript",color:J}]},{name:"vue",display:"Vue",color:Ie,variants:[{name:"vue",display:"JavaScript",color:Y},{name:"vue-ts",display:"TypeScript",color:J},{name:"custom-create-vue",display:"Customize with create-vue \u2197",color:Ie,customCommand:"npm create vue@latest TARGET_DIR"},{name:"custom-nuxt",display:"Nuxt \u2197",color:Br,customCommand:"npm exec nuxi init TARGET_DIR"}]},{name:"react",display:"React",color:Hr,variants:[{name:"react",display:"JavaScript",color:Y},{name:"react-ts",display:"TypeScript",color:J},{name:"react-swc",display:"JavaScript + SWC",color:Y},{name:"react-swc-ts",display:"TypeScript + SWC",color:J}]},{name:"preact",display:"Preact",color:Yr,variants:[{name:"preact",display:"JavaScript",color:Y},{name:"preact-ts",display:"TypeScript",color:J}]},{name:"lit",display:"Lit",color:Vr,variants:[{name:"lit",display:"JavaScript",color:Y},{name:"lit-ts",display:"TypeScript",color:J}]},{name:"svelte",display:"Svelte",color:ht,variants:[{name:"svelte",display:"JavaScript",color:Y},{name:"svelte-ts",display:"TypeScript",color:J},{name:"custom-svelte-kit",display:"SvelteKit \u2197",color:ht,customCommand:"npm create svelte@latest TARGET_DIR"}]},{name:"others",display:"Others",color:G,variants:[{name:"create-vite-extra",display:"create-vite-extra \u2197",color:G,customCommand:"npm create vite-extra@latest TARGET_DIR"}]}],Re=Nt.map(s=>s.variants&&s.variants.map(t=>t.name)||[s.name]).reduce((s,t)=>s.concat(t),[]),Wr={_gitignore:".gitignore"},Ft="vite-project";async function Gr(){const s=Ae(kt._[0]),t=kt.template||kt.t;let e=s||Ft;const i=()=>e==="."?P.basename(P.resolve()):e;let o;try{o=await Lr([{type:s?null:"text",name:"projectName",message:G("Project name:"),initial:Ft,onState:u=>{e=Ae(u.value)||Ft}},{type:()=>!O.existsSync(e)||Ur(e)?null:"confirm",name:"overwrite",message:()=>(e==="."?"Current directory":`Target directory "${e}"`)+" is not empty. Remove existing files and continue?"},{type:(u,{overwrite:y})=>{if(y===!1)throw new Error(ht("\u2716")+" Operation cancelled");return null},name:"overwriteChecker"},{type:()=>je(i())?null:"text",name:"packageName",message:G("Package name:"),initial:()=>Jr(i()),validate:u=>je(u)||"Invalid package.json name"},{type:t&&Re.includes(t)?null:"select",name:"framework",message:typeof t=="string"&&!Re.includes(t)?G(`"${t}" isn't a valid template. Please choose from below: `):G("Select a framework:"),initial:0,choices:Nt.map(u=>{const y=u.color;return{title:y(u.display||u.name),value:u}})},{type:u=>u&&u.variants?"select":null,name:"variant",message:G("Select a variant:"),choices:u=>u.variants.map(y=>{const m=y.color;return{title:m(y.display||y.name),value:y.name}})}],{onCancel:()=>{throw new Error(ht("\u2716")+" Operation cancelled")}})}catch(u){console.log(u.message);return}const{framework:n,overwrite:r,packageName:l,variant:c}=o,a=P.join(jt,e);r?Kr(a):O.existsSync(a)||O.mkdirSync(a,{recursive:!0});let w=c||n?.name||t,f=!1;w.includes("-swc")&&(f=!0,w=w.replace("-swc",""));const h=qr(process.env.npm_config_user_agent),g=h?h.name:"npm",p=g==="yarn"&&h?.version.startsWith("1."),{customCommand:E}=Nt.flatMap(u=>u.variants).find(u=>u.name===w)??{};if(E){const u=E.replace(/^npm create/,`${g} create`).replace("@latest",()=>p?"":"@latest").replace(/^npm exec/,()=>g==="pnpm"?"pnpm dlx":g==="yarn"&&!p?"yarn dlx":"npm exec"),[y,...m]=u.split(" "),H=m.map(Fe=>Fe.replace("TARGET_DIR",e)),{status:x}=V.sync(y,H,{stdio:"inherit"});process.exit(x??0)}console.log(`
Scaffolding project in ${a}...`);const S=P.resolve(Le(import.meta.url),"../..",`template-${w}`),C=(u,y)=>{const m=P.join(a,Wr[u]??u);y?O.writeFileSync(m,y):ke(P.join(S,u),m)},z=O.readdirSync(S);for(const u of z.filter(y=>y!=="package.json"))C(u);const T=JSON.parse(O.readFileSync(P.join(S,"package.json"),"utf-8"));T.name=l||i(),C("package.json",JSON.stringify(T,null,2)),f&&Zr(a,w.endsWith("-ts"));const d=P.relative(jt,a);switch(console.log(`
Done. Now run:
`),a!==jt&&console.log(`  cd ${d.includes(" ")?`"${d}"`:d}`),g){case"yarn":console.log("  yarn"),console.log("  yarn dev");break;default:console.log(`  ${g} install`),console.log(`  ${g} run dev`);break}console.log()}function Ae(s){return s?.trim().replace(/\/+$/g,"")}function ke(s,t){O.statSync(s).isDirectory()?zr(s,t):O.copyFileSync(s,t)}function je(s){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(s)}function Jr(s){return s.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z\d\-~]+/g,"-")}function zr(s,t){O.mkdirSync(t,{recursive:!0});for(const e of O.readdirSync(s)){const i=P.resolve(s,e),o=P.resolve(t,e);ke(i,o)}}function Ur(s){const t=O.readdirSync(s);return t.length===0||t.length===1&&t[0]===".git"}function Kr(s){if(O.existsSync(s))for(const t of O.readdirSync(s))t!==".git"&&O.rmSync(P.resolve(s,t),{recursive:!0,force:!0})}function qr(s){if(!s)return;const e=s.split(" ")[0].split("/");return{name:e[0],version:e[1]}}function Zr(s,t){Ne(P.resolve(s,"package.json"),e=>e.replace(/"@vitejs\/plugin-react": ".+?"/,'"@vitejs/plugin-react-swc": "^3.0.0"')),Ne(P.resolve(s,`vite.config.${t?"ts":"js"}`),e=>e.replace("@vitejs/plugin-react","@vitejs/plugin-react-swc"))}function Ne(s,t){const e=O.readFileSync(s,"utf-8");O.writeFileSync(s,t(e),"utf-8")}Gr().catch(s=>{console.error(s)});
